<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides an R interface to the Data Retriever
    &lt;https://retriever.readthedocs.io/en/latest/&gt; via the Data Retriever's
    command line interface. The Data Retriever automates the
    tasks of finding, downloading, and cleaning public datasets,
    and then stores them in a local database.">
<title>R Interface to the Data Retriever â€¢ rdataretriever</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R Interface to the Data Retriever">
<meta property="og:description" content="Provides an R interface to the Data Retriever
    &lt;https://retriever.readthedocs.io/en/latest/&gt; via the Data Retriever's
    command line interface. The Data Retriever automates the
    tasks of finding, downloading, and cleaning public datasets,
    and then stores them in a local database.">
<meta property="og:image" content="https://docs.ropensci.org/rdataretriever/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="index.html">rdataretriever</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/breed-bird-survey-analysis.html">Using the rdataretriever to quickly analyze Breeding Bird Survey data</a>
    <a class="dropdown-item" href="articles/provenance.html">Provenance &amp; Reproducibility Using the rdataretriever</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/rdataretriever/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="rdataretriever">rdataretriever<a class="anchor" aria-label="anchor" href="#rdataretriever"></a>
</h1>
</div>
<!-- badges: start -->
<!-- badges: end --><p>R interface to the <a href="https://retriever.readthedocs.io/en/latest/" class="external-link">Data Retriever</a>.</p>
<p>The <code>rdataretriever</code> provides access to cleaned versions of hundreds of commonly used public datasets with a single line of code.</p>
<p>These datasets come from many different sources and most of them require some cleaning and restructuring prior to analysis. The <code>rdataretriever</code> uses a set of actively maintained recipes for downloading, cleaning, and restructing these datasets using a combination of the <a href="https://specs.frictionlessdata.io/" class="external-link">Frictionless Data Specification</a> and custom data cleaning scripts.</p>
<p>The <code>rdataretriever</code> also facilitates the automatic storage of these datasets in a choice of database management systems (PostgreSQL, SQLite, MySQL, MariaDB) or flat file formats (CSV, XML, JSON) for later use and integration with large data analysis pipelines.</p>
<p>The <code>rdatretriever</code> also facilitates reproducibile science by providing tools to archive and rerun the precise version of a dataset and associated cleaning steps that was used for a specific analysis.</p>
<p>The <code>rdataretriever</code> handles the work of cleaning, storing, and archiving data so that you can focus on analysis, inference and visualization.</p>
<div class="section level2">
<h2 id="table-of-contents">Table of Contents<a class="anchor" aria-label="anchor" href="#table-of-contents"></a>
</h2>
<ul>
<li>
<a href="#installation">Installation</a><ul>
<li><a href="#basic-installation">Basic Installation (no Python experience needed)</a></li>
<li><a href="#advanced-installation-for-python-users">Advanced Installation for Python Users</a></li>
</ul>
</li>
<li><a href="#installing-tabular-datasets">Installing Tabular Datasets</a></li>
<li><a href="#installing-spatial-datasets">Installing Spatial Datasets</a></li>
<li><a href="#using-docker-containers">Using Docker Containers</a></li>
<li><a href="#provenance">Provenance</a></li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The <code>rdataretriever</code> is an R wrapper for the Python package, <a href="https://retriever.readthedocs.io/en/latest/" class="external-link">Data Retriever</a>. This means that <em>Python</em> and the <code>retriever</code> Python package need to be installed first.</p>
<div class="section level3">
<h3 id="basic-installation">Basic Installation<a class="anchor" aria-label="anchor" href="#basic-installation"></a>
</h3>
<p>If you just want to use the Data Retriever from within R follow these instuctions run the following commands in R. This will create a local Python installation that will only be used by R and install the needed Python package for you.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>install<span class="kw">.</span>packages<span class="kw">(</span><span class="st">'reticulate'</span><span class="kw">)</span> <span class="co"># Install R package for interacting with Python</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>reticulate<span class="kw">::</span>install_miniconda<span class="kw">()</span> <span class="co"># Install Python</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>reticulate<span class="kw">::</span>py_install<span class="kw">(</span><span class="st">'retriever'</span><span class="kw">)</span> <span class="co"># Install the Python retriever package</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>install<span class="kw">.</span>packages<span class="kw">(</span><span class="st">'rdataretriever'</span><span class="kw">)</span> <span class="co"># Install the R package for running the retriever</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>get_updates<span class="kw">()</span> <span class="co"># Update the available datasets</span></span></code></pre></div>
<p><strong>After running these commands restart R.</strong></p>
</div>
<div class="section level3">
<h3 id="advanced-installation-for-python-users">Advanced Installation for Python Users<a class="anchor" aria-label="anchor" href="#advanced-installation-for-python-users"></a>
</h3>
<p>If you are using Python for other tasks you can use <code>rdataretriever</code> with your existing Python installation (though the <a href="#basic-installation">basic installation</a> above will also work in this case by creating a separate miniconda install and Python environment).</p>
<div class="section level4">
<h4 id="install-the-retriever-python-package">Install the <code>retriever</code> Python package<a class="anchor" aria-label="anchor" href="#install-the-retriever-python-package"></a>
</h4>
<p>Install the <code>retriever</code> Python package into your prefered Python environment using either <code>conda</code> (64-bit conda is required):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-c</span> conda-forge retriever</span></code></pre></div>
<p>or <code>pip</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install retriever</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="select-the-python-environment-to-use-in-r">Select the Python environment to use in R<a class="anchor" aria-label="anchor" href="#select-the-python-environment-to-use-in-r"></a>
</h4>
<p><code>rdataretriever</code> will try to find Python environments with <code>retriever</code> (see the <code>reticulate</code> documentation on <a href="https://rstudio.github.io/reticulate/articles/versions.html#order-of-discovery-1" class="external-link">order of discovery</a> for more details) installed. Alternatively you can select a Python environment to use when working with <code>rdataretriever</code> (and other packages using <code>reticulate</code>).</p>
<p>The most robust way to do this is to set the <code>RETICULATE_PYTHON</code> environment variable to point to the preferred Python executable:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Sys<span class="kw">.</span>setenv<span class="kw">(</span>RETICULATE_PYTHON <span class="kw">=</span> <span class="st">"/path/to/python"</span><span class="kw">)</span></span></code></pre></div>
<p>This command can be run interactively or placed in <code>.Renviron</code> in your home directory.</p>
<p>Alternatively you can do select the Python environment through the <code>reticulate</code> package for either <code>conda</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>library<span class="kw">(</span>reticulate<span class="kw">)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>use_conda<span class="kw">(</span><span class="st">'name_of_conda_environment'</span><span class="kw">)</span></span></code></pre></div>
<p>or <code>virtualenv</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>library<span class="kw">(</span>reticulate<span class="kw">)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>use_virtualenv<span class="kw">(</span><span class="st">"path_to_virtualenv_environment"</span><span class="kw">)</span></span></code></pre></div>
<p>You can check to see which Python environment is being used with:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>py_config<span class="kw">()</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="install-the-rdataretriever-r-package">Install the <code>rdataretriever</code> R package<a class="anchor" aria-label="anchor" href="#install-the-rdataretriever-r-package"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>install<span class="kw">.</span>packages<span class="kw">(</span><span class="st">"rdataretriever"</span><span class="kw">)</span> <span class="co"># latest release from CRAN</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="kw">::</span>install_github<span class="kw">(</span><span class="st">"ropensci/rdataretriever"</span><span class="kw">)</span> <span class="co"># development version from GitHub</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="installing-tabular-datasets">Installing Tabular Datasets<a class="anchor" aria-label="anchor" href="#installing-tabular-datasets"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>library<span class="kw">(</span>rdataretriever<span class="kw">)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># List the datasets available via the Retriever</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>datasets<span class="kw">()</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Install the portal into csv files in your working directory</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>install_csv<span class="kw">(</span><span class="st">'portal'</span><span class="kw">)</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the raw portal dataset files without any processing to the</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># subdirectory named data</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>download<span class="kw">(</span><span class="st">'portal'</span><span class="kw">,</span> <span class="st">'./data/'</span><span class="kw">)</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Install and load a dataset as a list</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>portal <span class="kw">=</span> rdataretriever<span class="kw">::</span>fetch<span class="kw">(</span><span class="st">'portal'</span><span class="kw">)</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>names<span class="kw">(</span>portal<span class="kw">)</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>head<span class="kw">(</span>portal$species<span class="kw">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="installing-spatial-datasets">Installing Spatial Datasets<a class="anchor" aria-label="anchor" href="#installing-spatial-datasets"></a>
</h2>
<p><strong>Set-up and Requirements</strong></p>
<p><strong>Tools</strong></p>
<ul><li>PostgreSQL with PostGis, psql(client), raster2pgsql, shp2pgsql, gdal,</li></ul>
<p>The <code>rdataretriever</code> supports installation of spatial data into <code>Postgres DBMS</code>.</p>
<ol style="list-style-type: decimal">
<li>
<p><strong>Install PostgreSQL and PostGis</strong></p>
<p>To install <code>PostgreSQL</code> with <code>PostGis</code> for use with spatial data please refer to the <a href="https://trac.osgeo.org/postgis/wiki/UsersWikiPostGIS21UbuntuPGSQL93Apt" class="external-link">OSGeo Postgres installation instructions</a>.</p>
<p>We recommend storing your PostgreSQL login information in a <code>.pgpass</code> file to avoid supplying the password every time. See the <a href="https://wiki.postgresql.org/wiki/Pgpass" class="external-link"><code>.pgpass</code> documentation</a> for more details.</p>
<p>After installation, Make sure you have the paths to these tools added to your systemâ€™s <code>PATHS</code>. Please consult an operating system expert for help on how to change or add the <code>PATH</code> variables.</p>
<p><strong>For example, this could be a sample of paths exported on Mac:</strong></p>
<pre class="shell"><code>#~/.bash_profile file, Postgres PATHS and tools.
export PATH="/Applications/Postgres.app/Contents/MacOS/bin:${PATH}"
export PATH="$PATH:/Applications/Postgres.app/Contents/Versions/10/bin"
</code></pre>
</li>
<li>
<p><strong>Enable PostGIS extensions</strong></p>
<p>If you have <code>Postgres</code> set up, enable <code>PostGIS</code> extensions. This is done by using either <code>Postgres CLI</code> or <code>GUI(PgAdmin)</code> and run</p>
<p><strong>For psql CLI</strong> <code>shell  psql -d yourdatabase -c "CREATE EXTENSION postgis;"  psql -d yourdatabase -c "CREATE EXTENSION postgis_topology;"</code></p>
<p><strong>For GUI(PgAdmin)</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> EXTENSION postgis;</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> EXTENSION postgis_topology</span></code></pre></div>
<p>For more details refer to the <a href="https://postgis.net/docs/postgis_installation.html#install_short_version" class="external-link">PostGIS docs</a>.</p>
</li>
</ol>
<p><strong>Sample commands</strong></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rdataretriever</span><span class="fu">::</span><span class="fu"><a href="reference/install_postgres.html">install_postgres</a></span><span class="op">(</span><span class="st">'harvard-forest'</span><span class="op">)</span> <span class="co"># Vector data</span></span>
<span><span class="fu">rdataretriever</span><span class="fu">::</span><span class="fu"><a href="reference/install_postgres.html">install_postgres</a></span><span class="op">(</span><span class="st">'bioclim'</span><span class="op">)</span> <span class="co"># Raster data</span></span>
<span></span>
<span><span class="co"># Install only the data of USGS elevation in the given extent</span></span>
<span><span class="fu">rdataretriever</span><span class="fu">::</span><span class="fu"><a href="reference/install_postgres.html">install_postgres</a></span><span class="op">(</span><span class="st">'usgs-elevation'</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">-</span><span class="fl">94.98704597353938</span>, <span class="fl">39.027001800158615</span>, <span class="op">-</span><span class="fl">94.3599408119917</span>, <span class="fl">40.69577051867074</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="provenance">Provenance<a class="anchor" aria-label="anchor" href="#provenance"></a>
</h2>
<p>To ensure reproducibility the <code>rdataretriever</code> supports creating snapshots of the data and the script in time.</p>
<p>Use the commit function to create and store the snapshot image of the data in time. Provide a descriptive message for the created commit. This is comparable to a git commit, however the function bundles the data and scripts used as a backup.</p>
<p>With provenace, you will be able to reproduce the same analysis in the future.</p>
<p><strong>Commit a dataset</strong></p>
<p>By default commits will be stored in the provenance directory <code>.retriever_provenance</code>, but this directory can be changed by setting the environment variable <code>PROVENANCE_DIR</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>commit<span class="kw">(</span><span class="st">'abalone-age'</span><span class="kw">,</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                       commit_message<span class="kw">=</span><span class="st">'A snapshot of Abalone Dataset as of 2020-02-26'</span><span class="kw">)</span></span></code></pre></div>
<p>You can also set the path for an individual commit:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>commit<span class="kw">(</span><span class="st">'abalone-age'</span><span class="kw">,</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                       commit_message<span class="kw">=</span><span class="st">'Data and recipe archive for Abalone Data on 2020-02-26'</span><span class="kw">,</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                       path<span class="kw">=</span><span class="st">'.'</span><span class="kw">)</span></span></code></pre></div>
<p><strong>View a log of committed datasets in the provenance directory</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>commit_log<span class="kw">(</span><span class="st">'abalone-age'</span><span class="kw">)</span></span></code></pre></div>
<p><strong>Install a committed dataset</strong></p>
<p>To reanalyze a committed dataset, rdataretriever will obtain the data and script from the history and rdataretriever will install this particular data into the given back-end. For example, SQLite:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>install_sqlite<span class="kw">(</span><span class="st">'abalone-age-a76e77.zip'</span><span class="kw">)</span> </span></code></pre></div>
<p>Datasets stored in provenance directory can be installed directly using hash value</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode coffee"><code class="sourceCode coffee"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>rdataretriever<span class="kw">::</span>install_sqlite<span class="kw">(</span><span class="st">'abalone-age'</span><span class="kw">,</span> hash_value<span class="kw">=</span><span class="st">'a76e77'</span><span class="kw">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-docker-containers">Using Docker Containers<a class="anchor" aria-label="anchor" href="#using-docker-containers"></a>
</h2>
<p>To run the image interactively</p>
<p><code>docker-compose run --service-ports rdata /bin/bash</code></p>
<p>To run tests</p>
<p><code>docker-compose  run rdata Rscript load_and_test.R</code></p>
</div>
<div class="section level2">
<h2 id="release">Release<a class="anchor" aria-label="anchor" href="#release"></a>
</h2>
<p>Make sure you have tests passing on R-oldrelease, current R-release and R-devel</p>
<p>To check the package</p>
<pre class="shell"><code>R CMD Build #build the package
R CMD check  --as-cran --no-manual rdataretriever_[version]tar.gz</code></pre>
<p>To Test</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"./rdataretriever"</span><span class="op">)</span> <span class="co"># Set working directory</span></span>
<span><span class="co"># install all deps</span></span>
<span><span class="co"># install.packages("reticulate")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tomoakin/RPostgreSQL" class="external-link">RPostgreSQL</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rsqlite.r-dbi.org" class="external-link">RSQLite</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rmariadb.r-dbi.org" class="external-link">RMariaDB</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"."</span>, repos <span class="op">=</span> <span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">test</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To get citation information for the <code>rdataretriever</code> in R use <code>citation(package = 'rdataretriever')</code></p>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>A big thanks to Ben Morris for helping to develop the Data Retriever. Thanks to the rOpenSci team with special thanks to Gavin Simpson, Scott Chamberlain, and Karthik Ram who gave helpful advice and fostered the development of this R package. Development of this software was funded by the <a href="https://nsf.gov/" class="external-link">National Science Foundation</a> as part of a <a href="https://nsf.gov/awardsearch/showAward.do?AwardNumber=0953694" class="external-link">CAREER award to Ethan White</a>.</p>
<hr>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rdataretriever" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ropensci/rdataretriever/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ropensci/rdataretriever/issues" class="external-link">Report a bug</a></li>
</ul>
</div>



<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rdataretriever</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Henry Senyondo <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7105-5808" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Daniel McGlinn <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2359-3526" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Pranita Sharma <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-5871-380X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>David J Harris <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-3332-9307" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Hao Ye <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-8630-1458" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Shawn Taylor <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-6178-6903" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://github.com/jeroen" class="external-link">Jeroen Ooms</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4035-0289" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Francisco RodrÃ­guez-SÃ¡nchez Ooms <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-7981-1599" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://ram.berkeley.edu/" class="external-link">Karthik Ram</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-0233-1757" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Apoorva Pandey <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-9834-4415" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Harshit Bansal <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3285-812X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Max Pohlman <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2325-6984" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Ethan White <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-6728-7745" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="r-universe">
<h2 data-toc-skip>R-universe</h2>
<ul class="list-unstyled">
<li><p><a href="https://ropensci.r-universe.dev/rdataretriever" class="external-link"><img src="https://ropensci.r-universe.dev/badges/rdataretriever" alt="rdataretriever status badge"></a></p></li>
</ul>
</div>

  </aside>
</div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
